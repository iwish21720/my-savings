<!DOCTYPE html>
<html lang="zh-TW">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ¸ 365å­˜éŒ¢æ—¥èªŒ</title>
    
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/584/584052.png">
<link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/584/584052.png">

<meta name="mobile-web-app-capable" content="yes">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="365å­˜éŒ¢æ—¥èªŒ">
    <meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <style>
        :root {
            --primary-pink: #ffb7c5;
            --dark-pink: #ff8fa3;
            --bg-color: #fff5f6;
            --text-color: #5d4037;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background-color: var(--bg-color);
            margin: 0; padding: 20px;
            display: flex; flex-direction: column; align-items: center;
        }

        .header { text-align: center; margin-bottom: 20px; }
        h1 { color: var(--dark-pink); margin-bottom: 5px; }

        .stats-container {
            background: white; padding: 20px; border-radius: 20px;
            box-shadow: 0 10px 25px rgba(255, 183, 197, 0.3);
            width: 100%; max-width: 500px; margin-bottom: 25px; text-align: center;
            position: sticky; top: 10px; z-index: 100;
        }

        .progress-bar-bg { background: #eee; border-radius: 15px; height: 20px; margin: 10px 0; overflow: hidden; }
        .progress-bar-fill {
            background: linear-gradient(90deg, var(--primary-pink), var(--dark-pink));
            height: 100%; width: 0%; transition: width 0.5s ease;
        }

        .grid-container {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 12px; width: 100%; max-width: 900px;
        }

        .day-card {
            background: white; border: 2px solid var(--primary-pink);
            border-radius: 15px; padding: 12px 5px; text-align: center;
            cursor: pointer; transition: all 0.2s; position: relative;
        }

        .day-card.completed {
            background-color: var(--dark-pink); color: white; border-color: var(--dark-pink);
        }

        .date-label {
            display: none; font-size: 9px; margin-top: 5px;
            background: rgba(255,255,255,0.2); border-radius: 5px;
        }

        .completed .date-label { display: block; }

        .day-num { font-weight: bold; display: block; font-size: 16px; }
        .amount { font-size: 13px; opacity: 0.9; }
    </style>
</head>
<body>

    <div class="header">
        <h1>ğŸŒ¸ 365å¤©æŒ‘æˆ°</h1>
        <p>ç„¡ç—›å­˜13è¬æˆ‘ä¾†å•¦~~~</p>
    </div>

    <div class="stats-container">
        <div style="font-size: 14px;">ç›®æ¨™: $133,590 | å·²å­˜: <strong id="currentAmount">$0</strong></div>
        <div class="progress-bar-bg"><div id="progressFill" class="progress-bar-fill"></div></div>
        <div style="font-size: 13px;">å®Œæˆé€²åº¦: <span id="percent">0%</span> (<span id="completedDays">0</span>/365)</div>
    </div>

    <div class="grid-container" id="grid"></div>

    <script>
    const grid = document.getElementById('grid');
    const progressFill = document.getElementById('progressFill');
    const currentAmountDisplay = document.getElementById('currentAmount');
    const percentDisplay = document.getElementById('percent');
    const completedDaysDisplay = document.getElementById('completedDays');

    // å»ºç«‹ 365 å€‹æ ¼å­
    for (let i = 1; i <= 365; i++) {
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.innerText = i;
        cell.onclick = () => toggleSelect(cell, i);
        grid.appendChild(cell);
    }

    // é»æ“Šæ ¼å­çš„é‚è¼¯
    function toggleSelect(element, day) {
        element.classList.toggle('selected');
        updateProgress();
        saveData();

        // --- è¯éº—å½©å¸¶ç‰¹æ•ˆé‚è¼¯ ---
        const allCells = document.querySelectorAll('.cell');
        const selectedCells = document.querySelectorAll('.cell.selected');
        
        if (selectedCells.length === 1) {
            // å™´å‡ºç¬¬ä¸€æ³¢ä¸­å¤®å½©å¸¶
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#ffb7c5', '#ffffff', '#ff69b4']
            });

            // æŒçºŒ 3 ç§’çš„å·¦å³å™´æ³‰
            var duration = 3 * 1000;
            var end = Date.now() + duration;

            (function frame() {
                confetti({ particleCount: 3, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#ffb7c5', '#ff69b4'] });
                confetti({ particleCount: 3, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#ffb7c5', '#ff69b4'] });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());

            setTimeout(() => {
                alert("ğŸŠ æ­å–œé”æˆ 365x2 å„²è“„ç›®æ¨™ï¼\n\nä½ å·²ç¶“æˆåŠŸå­˜ä¸‹äº† $133,590 å…ƒï¼\nä½ çœŸçš„å¤ªæ£’äº†ï¼ğŸŒ¸");
            }, 1500);
        }
    }

    // æ›´æ–°é€²åº¦æ¢èˆ‡é‡‘é¡
    function updateProgress() {
        const selectedCells = document.querySelectorAll('.cell.selected');
        const count = selectedCells.length;
        const totalAmount = count * (count + 1); // é€™æ˜¯ 365x2 çš„ç°¡æ˜“å…¬å¼ï¼š(1+2...+n)*2
        
        const progressPercent = (count / 365) * 100;
        progressFill.style.width = progressPercent + '%';
        
        currentAmountDisplay.innerText = totalAmount.toLocaleString();
        percentDisplay.innerText = Math.round(progressPercent);
        completedDaysDisplay.innerText = count;
    }

    // å„²å­˜è³‡æ–™
    function saveData() {
        const selectedIndices = Array.from(document.querySelectorAll('.cell')).map((cell, index) => cell.classList.contains('selected') ? index : null).filter(i => i !== null);
        localStorage.setItem('savedProgress_365x2', JSON.stringify(selectedIndices));
    }

    // è®€å–è³‡æ–™
    function loadData() {
        const saved = JSON.parse(localStorage.getItem('savedProgress_365x2'));
        if (saved) {
            const cells = document.querySelectorAll('.cell');
            saved.forEach(index => cells[index].classList.add('selected'));
            updateProgress();
        }
    }

    window.onload = loadData;
</script>
</body>
</html>
