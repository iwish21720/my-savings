<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ¸ 365æ—¥å„²è“„æŒ‘æˆ°</title>
    
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/584/584052.png">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/584/584052.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary-pink: #ffb7c5;
            --dark-pink: #ff8fa3;
            --bg-color: #fff5f6;
            --text-color: #5d4037;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background-color: var(--bg-color);
            margin: 0; padding: 20px;
            display: flex; flex-direction: column; align-items: center;
        }

        .header { text-align: center; margin-bottom: 20px; }
        h1 { color: var(--dark-pink); margin-bottom: 5px; }

        .stats-container {
            background: white; padding: 20px; border-radius: 20px;
            box-shadow: 0 10px 25px rgba(255, 183, 197, 0.3);
            width: 100%; max-width: 500px; margin-bottom: 25px; text-align: center;
            position: sticky; top: 10px; z-index: 100;
        }

        .progress-bar-bg { background: #eee; border-radius: 15px; height: 20px; margin: 10px 0; overflow: hidden; }
        .progress-bar-fill {
            background: linear-gradient(90deg, var(--primary-pink), var(--dark-pink));
            height: 100%; width: 0%; transition: width 0.5s ease;
        }

        /* åŸå§‹ç™½åº•ç²‰æ¡†æ¨£å¼ */
        .grid-container {
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 12px; width: 100%; max-width: 900px;
        }

        .day-card {
            background: white; /* åŸå§‹ç™½åº• */
            border: 2px solid var(--primary-pink); /* ç²‰æ¡† */
            border-radius: 15px; padding: 12px 5px; text-align: center;
            cursor: pointer; transition: all 0.2s; position: relative;
            color: var(--text-color);
        }

        /* é»æ“Šå¾Œè®Šç²‰è‰²æ¨£å¼ */
        .day-card.completed {
            background-color: var(--dark-pink); /* åç²‰è‰² */
            color: white; 
            border-color: var(--dark-pink);
        }

        .date-label {
            font-size: 9px; margin-top: 5px;
            background: rgba(255,255,255,0.3); border-radius: 5px;
            display: none;
        }

        .day-card.completed .date-label { display: block; }

        .day-num { font-weight: bold; display: block; font-size: 16px; }
        .amount { font-size: 13px; opacity: 0.9; }
    </style>
</head>
<body>

    <div class="header">
        <h1>ğŸŒ¸ 365æ—¥å„²è“„æŒ‘æˆ°</h1>
        <p>ç„¡ç—›å­˜13è¬æˆ‘ä¾†å•¦ï½ï½ï½</p>
    </div>

    <div class="stats-container">
        <div style="font-size: 14px;">ç›®æ¨™: $133,590 | å·²å­˜: <strong id="currentAmount">$0</strong></div>
        <div class="progress-bar-bg"><div id="progressFill" class="progress-bar-fill"></div></div>
        <div style="font-size: 13px;">å®Œæˆé€²åº¦: <span id="percent">0%</span> (<span id="completedDays">0</span>/365)</div>
    </div>

    <div id="grid" class="grid-container"></div>

    <script>
        const grid = document.getElementById('grid');
        const progressFill = document.getElementById('progressFill');
        const currentAmountDisplay = document.getElementById('currentAmount');
        const percentDisplay = document.getElementById('percent');
        const completedDaysDisplay = document.getElementById('completedDays');
        
        let savedRecords = JSON.parse(localStorage.getItem('savings_pro_365')) || [];

        function init() {
            grid.innerHTML = ''; 
            for (let day = 1; day <= 365; day++) {
                const amount = day * 2;
                const record = savedRecords.find(r => r.day === day);
                
                const card = document.createElement('div');
                card.className = 'day-card' + (record ? ' completed' : '');
                
                card.innerHTML = `
                    <span class="day-num">${day}</span>
                    <span class="amount">$${amount}</span>
                    <div class="date-label">${record ? record.date : ''}</div>
                `;

                card.onclick = () => toggleDay(day, card);
                grid.appendChild(card);
            }
            updateStats();
        }

        function toggleDay(day, element) {
            const index = savedRecords.findIndex(r => r.day === day);
            
            if (index > -1) {
                if(confirm("ç¢ºå®šè¦å–æ¶ˆé€™ä¸€å¤©çš„ç´€éŒ„å—ï¼Ÿ")) {
                    savedRecords.splice(index, 1);
                    element.classList.remove('completed');
                }
            } else {
                const now = new Date();
                const dateStr = `${now.getMonth()+1}/${now.getDate()} ${now.getHours()}:${now.getMinutes()}`;
                savedRecords.push({ day: day, date: dateStr });
                element.classList.add('completed');
                element.querySelector('.date-label').innerText = dateStr;
                
                // æª¢æŸ¥æ˜¯å¦å…¨æ»¿ 365 å¤©
                if (savedRecords.length === 365) {
                    launchCelebration();
                }
            }
            
            localStorage.setItem('savings_pro_365', JSON.stringify(savedRecords));
            updateStats();
        }

        function updateStats() {
            const currentTotal = savedRecords.reduce((sum, r) => sum + (r.day * 2), 0);
            const count = savedRecords.length;
            const percentage = ((currentTotal / 133590) * 100).toFixed(1);
            
            currentAmountDisplay.innerText = `$${currentTotal.toLocaleString()}`;
            percentDisplay.innerText = `${percentage}%`;
            progressFill.style.width = `${percentage}%`;
            completedDaysDisplay.innerText = count;
        }

        function launchCelebration() {
            // å½©å¸¶ç‰¹æ•ˆ
            confetti({
                particleCount: 200, spread: 80, origin: { y: 0.6 },
                colors: ['#ffb7c5', '#ffffff', '#ff69b4', '#ffd700']
            });
            
            let end = Date.now() + (3 * 1000);
            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#ffb7c5', '#ff69b4'] });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#ffb7c5', '#ff69b4'] });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());

            setTimeout(() => {
                alert("ğŸŠ æ­å–œé”æˆ 365æ—¥å„²è“„æŒ‘æˆ°ï¼\n\nä½ å·²ç¶“æˆåŠŸå­˜ä¸‹äº† $133,590 å…ƒï¼\nå …æŒåˆ°åº•çš„ä½ çœŸçš„å¤ªæ£’äº†ï¼ğŸŒ¸");
            }, 1500);
        }

        init();
    </script>
</body>
</html>
