<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ¸ æˆ‘çš„ 365x2 å­˜éŒ¢æ—¥èªŒ</title>
    <style>
        :root {
            --primary-pink: #ffb7c5;
            --dark-pink: #ff8fa3;
            --bg-color: #fff5f6;
            --text-color: #5d4037;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background-color: var(--bg-color);
            margin: 0; padding: 20px;
            display: flex; flex-direction: column; align-items: center;
        }

        .header { text-align: center; margin-bottom: 20px; }
        h1 { color: var(--dark-pink); margin-bottom: 5px; }

        .stats-container {
            background: white; padding: 20px; border-radius: 20px;
            box-shadow: 0 10px 25px rgba(255, 183, 197, 0.3);
            width: 100%; max-width: 500px; margin-bottom: 25px; text-align: center;
            position: sticky; top: 10px; z-index: 100;
        }

        .progress-bar-bg { background: #eee; border-radius: 15px; height: 20px; margin: 10px 0; overflow: hidden; }
        .progress-bar-fill {
            background: linear-gradient(90deg, var(--primary-pink), var(--dark-pink));
            height: 100%; width: 0%; transition: width 0.5s ease;
        }

        .grid-container {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 12px; width: 100%; max-width: 900px;
        }

        .day-card {
            background: white; border: 2px solid var(--primary-pink);
            border-radius: 15px; padding: 12px 5px; text-align: center;
            cursor: pointer; transition: all 0.2s; position: relative;
        }

        .day-card.completed {
            background-color: var(--dark-pink); color: white; border-color: var(--dark-pink);
        }

        .date-label {
            display: none; font-size: 9px; margin-top: 5px;
            background: rgba(255,255,255,0.2); border-radius: 5px;
        }

        .completed .date-label { display: block; }

        .day-num { font-weight: bold; display: block; font-size: 16px; }
        .amount { font-size: 13px; opacity: 0.9; }
    </style>
</head>
<body>

    <div class="header">
        <h1>ğŸŒ¸ 365å¤© x 2 æŒ‘æˆ°</h1>
        <p>æ¯ä¸€ç­†ç´€éŒ„ï¼Œéƒ½æ˜¯å°æœªä¾†çš„æŠ•è³‡</p>
    </div>

    <div class="stats-container">
        <div style="font-size: 14px;">ç›®æ¨™: $133,590 | å·²å­˜: <strong id="currentAmount">$0</strong></div>
        <div class="progress-bar-bg"><div id="progressFill" class="progress-bar-fill"></div></div>
        <div style="font-size: 13px;">å®Œæˆé€²åº¦: <span id="percent">0%</span> (<span id="completedDays">0</span>/365)</div>
    </div>

    <div class="grid-container" id="grid"></div>

    <script>
        const grid = document.getElementById('grid');
        const progressFill = document.getElementById('progressFill');
        const currentAmountDisplay = document.getElementById('currentAmount');
        const percentDisplay = document.getElementById('percent');
        const completedDaysDisplay = document.getElementById('completedDays');
        
        // è®€å–è³‡æ–™ï¼šç¾åœ¨å„²å­˜çš„æ˜¯ç‰©ä»¶ {day: 1, date: '2023/10/27'}
        let savedRecords = JSON.parse(localStorage.getItem('savings_pro_365')) || [];

        function init() {
            for (let day = 1; day <= 365; day++) {
                const amount = day * 2;
                const record = savedRecords.find(r => r.day === day);
                
                const card = document.createElement('div');
                card.className = 'day-card' + (record ? ' completed' : '');
                
                card.innerHTML = `
                    <span class="day-num">${day}</span>
                    <span class="amount">$${amount}</span>
                    <div class="date-label">${record ? record.date : ''}</div>
                `;

                card.onclick = () => toggleDay(day, card);
                grid.appendChild(card);
            }
            updateStats();
        }

        function toggleDay(day, element) {
            const index = savedRecords.findIndex(r => r.day === day);
            
            if (index > -1) {
                if(confirm("ç¢ºå®šè¦å–æ¶ˆé€™ä¸€å¤©çš„ç´€éŒ„å—ï¼Ÿ")) {
                    savedRecords.splice(index, 1);
                    element.classList.remove('completed');
                }
            } else {
                const now = new Date();
                const dateStr = `${now.getMonth()+1}/${now.getDate()} ${now.getHours()}:${now.getMinutes()}`;
                savedRecords.push({ day: day, date: dateStr });
                element.classList.add('completed');
                element.querySelector('.date-label').innerText = dateStr;
            }
            
            localStorage.setItem('savings_pro_365', JSON.stringify(savedRecords));
            updateStats();
        }

        function updateStats() {
            const currentTotal = savedRecords.reduce((sum, r) => sum + (r.day * 2), 0);
            const percentage = ((currentTotal / 133590) * 100).toFixed(1);
            
            currentAmountDisplay.innerText = `$${currentTotal.toLocaleString()}`;
            percentDisplay.innerText = `${percentage}%`;
            progressFill.style.width = `${percentage}%`;
            completedDaysDisplay.innerText = savedRecords.length;
        }

        init();
    </script>
</body>
</html>
